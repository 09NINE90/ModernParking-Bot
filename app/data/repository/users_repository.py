async def get_user_id_by_tg_id(cur, tg_id):
    """
    Находит внутренний идентификатор пользователя по его Telegram ID.

    Выполняет поиск в таблице пользователей, чтобы получить внутренний UUID пользователя
    на основе его идентификатора в Telegram.

    Параметры:
        cur: курсор базы данных для выполнения SQL-запросов
        tg_id: уникальный идентификатор пользователя в Telegram

    Возвращает:
        dict или None:
            - Словарь с полем 'user_id', содержащим внутренний UUID пользователя
            - None, если пользователь с указанным Telegram ID не найден

    Логика:
        - Ищет запись в таблице users где tg_id совпадает с переданным значением
        - Возвращает внутренний идентификатор пользователя (user_id) из базы данных

    Особенности:
        - Используется для связывания Telegram-аккаунта с внутренней системой идентификации
        - Предполагает, что tg_id уникален для каждого пользователя
        - Асинхронная функция, требует await при вызове
        - Является ключевой функцией для аутентификации и авторизации пользователей
    """
    cur.execute(
        'SELECT user_id FROM dont_touch.users WHERE tg_id = %s',
        (tg_id,)
    )
    return cur.fetchone()


async def decrement_user_rating(cur, db_user_id):
    """
    Уменьшает рейтинг пользователя.

    Обновляет счетчик рейтинга пользователя, уменьшая его на 1.

    Параметры:
        cur: курсор базы данных для выполнения SQL-запросов
        user_id: UUID пользователя, чей рейтинг нужно увеличить

    Логика:
        - Декрементирует значение rating на 1
        - Используется для отслеживания количества полученных мест

    Особенности:
        - Рейтинг используется для приоритизации при будущих распределениях
        - Более высокий рейтинг = меньше приоритет (судя по ORDER BY rating ASC в предыдущих функциях)
        - Асинхронная функция, требует await при вызове
        - Система поощряет справедливость - те, кто получил больше мест, имеют меньший приоритет
    """
    cur.execute("""
                UPDATE dont_touch.users
                SET rating = rating - 1
                WHERE user_id = %s
                RETURNING user_id
                """, (db_user_id,))

    return cur.fetchone()

async def increment_user_rating(cur, user_id):
    """
    Увеличивает рейтинг пользователя.

    Обновляет счетчик рейтинга пользователя, увеличивая его на 1.

    Параметры:
        cur: курсор базы данных для выполнения SQL-запросов
        user_id: UUID пользователя, чей рейтинг нужно увеличить

    Логика:
        - Инкрементирует значение rating на 1
        - Используется для отслеживания количества полученных мест

    Особенности:
        - Рейтинг используется для приоритизации при будущих распределениях
        - Более высокий рейтинг = меньше приоритет (судя по ORDER BY rating ASC в предыдущих функциях)
        - Асинхронная функция, требует await при вызове
        - Система поощряет справедливость - те, кто получил больше мест, имеют меньший приоритет
    """
    cur.execute('''
                UPDATE dont_touch.users
                SET rating = rating + 1
                WHERE user_id = %s
                ''', (user_id,))
